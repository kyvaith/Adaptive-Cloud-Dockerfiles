server {
    listen 80;
    root /var/www/html;

    location ~ (?:^|/)\. {
        deny all;
    }

    location / {
        # for wp cache enabler plugin
        try_files $cache_enabler_uri $uri $uri/ $custom_subdir/index.php?$args;
    }

    location ~* /(wp-login\.php) {
        limit_req zone=xwplogin burst=1 nodelay;
        include /etc/nginx/extra.conf.d/php/php-wpsc.conf;
    }

    location ~* /(xmlrpc\.php) {
        limit_req zone=xwprpc burst=45 nodelay;
        include /etc/nginx/extra.conf.d/php/php-wpsc.conf;
    }

    # Protect dirs: akismet and sucuri-scanner
    include /etc/nginx/extra.conf.d/wp/wp-autoprotect.conf;

    # Something related to wp-cache :)
    include /etc/nginx/extra.conf.d/wp/wpcacheenabler.conf;

    # WordPress security
    include /etc/nginx/extra.conf.d/wp/wpsecure.conf;

    # Settings for static files
    include /etc/nginx/extra.conf.d/staticfiles.conf;

    # Drop logs and requests
    include /etc/nginx/extra.conf.d/drop.conf;

    # Enable PHP for vHost
    include /etc/nginx/extra.conf.d/php/php-wpsc.conf;

    # Enable PageSpeed
    include /etc/nginx/extra.conf.d/pagespeed/pagespeed.conf;
}
